# Test-specific configuration for Hazelcast cache
# This configuration provides fast, isolated cache behavior for testing

#### Cache Configuration for Testing ######
# Enable cache for testing to validate cache integration
bookstore.cache.enabled=true

# Small cache sizes for fast test execution and memory efficiency
bookstore.cache.max-size=10
bookstore.cache.time-to-live-seconds=30
bookstore.cache.max-idle-seconds=10

# Disable write-through for tests to avoid database synchronization overhead
bookstore.cache.write-through=false
bookstore.cache.write-batch-size=1
bookstore.cache.write-delay-seconds=0

# Disable metrics in tests to reduce overhead
bookstore.cache.metrics-enabled=false

# Minimal backup configuration for test isolation
bookstore.cache.backup-count=0
bookstore.cache.read-backup-data=false

#### Test-specific Hazelcast Configuration ######
# Use embedded Hazelcast instance for testing (no clustering)
# These properties will be used by HazelcastConfig when running tests

#### Logging Configuration for Cache Testing ######
# Reduce cache-related logging noise during tests
logging.level.com.sivalabs.bookstore.orders.cache=WARN
logging.level.com.sivalabs.bookstore.config.HazelcastConfig=WARN
logging.level.com.hazelcast=WARN

#### Test Database Configuration ######
# Use Liquibase for schema management (don't let Hibernate create schema)
spring.jpa.hibernate.ddl-auto=none
spring.jpa.show-sql=false

# Faster test execution with reduced connection overhead
spring.datasource.hikari.minimum-idle=1
spring.datasource.hikari.maximum-pool-size=3

#### Test Actuator Configuration ######
# Disable some actuator endpoints in tests for faster startup
management.endpoints.enabled-by-default=false
management.endpoint.health.enabled=true
management.endpoint.metrics.enabled=false
management.endpoint.prometheus.enabled=false

#### Test Events Configuration ######
# Use in-memory event store for faster tests
spring.modulith.events.jdbc.enabled=false

#### Test Tracing Configuration ######
# Disable tracing in tests to reduce overhead
management.tracing.enabled=false
management.tracing.sampling.probability=0.0
